<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="android nfc," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="今天上海终于下雪了，虽然是雨夹雪，不过还是有点惊喜的，元旦休息5天，只要不是连续阴雨，我感觉应该还是满足了吧。昨天在公司的时候和我们部门一起分享了自己开发Android的心得，今天稍微整理一下，这篇文章就能搞定了； 了解Android的NFC开发，我们需要打开Android的开发文档找到NFC部分： http://developer.android.com/guide/topics/connect">
<meta name="keywords" content="android nfc">
<meta property="og:type" content="article">
<meta property="og:title" content="【又4】Android NFC 开发简介">
<meta property="og:url" content="http://www.yangjungou.com/2012/12/29/e3-80-90-e5-8f-884-e3-80-91android-nfc-e5-bc-80-e5-8f-91-e7-ae-80-e4-bb-8b/index.html">
<meta property="og:site_name" content="冰雪.俊构">
<meta property="og:description" content="今天上海终于下雪了，虽然是雨夹雪，不过还是有点惊喜的，元旦休息5天，只要不是连续阴雨，我感觉应该还是满足了吧。昨天在公司的时候和我们部门一起分享了自己开发Android的心得，今天稍微整理一下，这篇文章就能搞定了； 了解Android的NFC开发，我们需要打开Android的开发文档找到NFC部分： http://developer.android.com/guide/topics/connect">
<meta property="og:image" content="http://www.yangjungou.com/wp-content/uploads/2012/12/nfc1.png">
<meta property="og:image" content="http://www.yangjungou.com/wp-content/uploads/2012/12/2.png">
<meta property="og:updated_time" content="2017-06-15T08:14:33.175Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="【又4】Android NFC 开发简介">
<meta name="twitter:description" content="今天上海终于下雪了，虽然是雨夹雪，不过还是有点惊喜的，元旦休息5天，只要不是连续阴雨，我感觉应该还是满足了吧。昨天在公司的时候和我们部门一起分享了自己开发Android的心得，今天稍微整理一下，这篇文章就能搞定了； 了解Android的NFC开发，我们需要打开Android的开发文档找到NFC部分： http://developer.android.com/guide/topics/connect">
<meta name="twitter:image" content="http://www.yangjungou.com/wp-content/uploads/2012/12/nfc1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.yangjungou.com/2012/12/29/e3-80-90-e5-8f-884-e3-80-91android-nfc-e5-bc-80-e5-8f-91-e7-ae-80-e4-bb-8b/"/>





  <title>【又4】Android NFC 开发简介 | 冰雪.俊构</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">冰雪.俊构</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">never try never know</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://www.yangjungou.com/2012/12/29/e3-80-90-e5-8f-884-e3-80-91android-nfc-e5-bc-80-e5-8f-91-e7-ae-80-e4-bb-8b/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Jeson.yang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="https://avatars2.githubusercontent.com/u/2267650?v=3&s=460">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冰雪.俊构">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">【又4】Android NFC 开发简介</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2012-12-29T18:56:12+08:00">
                2012-12-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/个人生活/" itemprop="url" rel="index">
                    <span itemprop="name">个人生活</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <p>今天上海终于下雪了，虽然是雨夹雪，不过还是有点惊喜的，元旦休息5<span style="font-family: 宋体;">天，只要不是连续阴雨，我感觉应该还是满足了吧。昨天在公司的时候和我们部门一起分享了自己开发</span><span style="font-family: Calibri;">Android</span><span style="font-family: 宋体;">的心得，今天稍微整理一下，这篇文章就能搞定了；</span></p>
<p>了解<span style="font-family: Calibri;">Android</span><span style="font-family: 宋体;">的</span><span style="font-family: Calibri;">NFC</span><span style="font-family: 宋体;">开发，我们需要打开</span><span style="font-family: Calibri;">Android</span><span style="font-family: 宋体;">的开发文档找到</span><span style="font-family: Calibri;">NFC</span><span style="font-family: 宋体;">部分：</span></p>
<p><em><a href="http://developer.android.com/guide/topics/connectivity/nfc/index.html" target="_blank" rel="external">http://developer.android.com/guide/topics/connectivity/nfc/index.html</a></em></p>
<p>如果打不开可以看我上一篇文章——科学上网<span style="font-family: Calibri;">,</span><span style="font-family: 宋体;">稳定的使用</span><span style="font-family: Calibri;">Google</span></p>
<h1 id="1-简介"><a href="#1-简介" class="headerlink" title="1,简介"></a><strong>1,<span style="font-family: 宋体;">简介</span></strong></h1><p>首先我们需了解什么是<span style="font-family: Calibri;">NFC?</span><span style="font-family: 宋体;">来看一下</span><span style="font-family: Calibri;">Google</span><span style="font-family: 宋体;">的定义，</span></p>
<p><em>Near Field Communication</em></p>
<p><em>Near Field Communication (NFC) is a set of short-range wireless technologies, typically requiring a distance of 4cm or less to initiate a connection. NFC allows you to share small payloads of data between an NFC tag and an Android-powered device, or between two Android-powered devices.</em></p>
<p><em>Tags can range in complexity. Simple tags offer just read and write semantics, sometimes with one-time-programmable areas to make the card read-only. More complex tags offer math operations, and have cryptographic hardware to authenticate access to a sector. The most sophisticated tags contain operating environments, allowing complex interactions with code executing on the tag. The data stored in the tag can also be written in a variety of formats, but many of the Android framework APIs are based around a <a href="http://www.nfc-forum.org/" target="_blank" rel="external">NFC Forum</a>standard called NDEF (NFC Data Exchange Format).</em></p>
<p>本人才疏学浅，用google<span style="font-family: 宋体;">的翻译工具翻译并修改了一下：</span></p>
<p>翻译：</p>
<p>近场通信（<span style="font-family: Calibri;">NFC</span><span style="font-family: 宋体;">）是一种短距离的高频无线通信技术 ，通常建立连接的距离小于</span><span style="font-family: Calibri;">4cm</span><span style="font-family: 宋体;">。你可以通过它在一个</span><span style="font-family: Calibri;">NFC</span><span style="font-family: 宋体;">标签与</span><span style="font-family: Calibri;">Android</span><span style="font-family: 宋体;">的机器之间，或者两台</span><span style="font-family: Calibri;">android</span><span style="font-family: 宋体;">机器之间，完成小的支付数据交互，</span><br>Tag<span style="font-family: 宋体;">的种类复杂。简单的标签只提供了读和写功能，使用一次性可编程技术可以使卡变成只读卡；更复杂的标签提供了数学运算，并有硬件加密来访问指定区域。最先进的标签中包含的操作环境，可以在标签上执行程式和复杂的数据交换。数据存储在标签也有不同的格式，但许多</span><span style="font-family: Calibri;">Android API</span><span style="font-family: 宋体;">都是基于</span><span style="font-family: Calibri;">NFC Forum</span><span style="font-family: 宋体;">上的标准格式——</span><span style="font-family: Calibri;">NDEF.</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>这里有两个概念要了解，<span style="font-family: Calibri;">Tag</span><span style="font-family: 宋体;">和</span><span style="font-family: Calibri;">NDEF</span><span style="font-family: 宋体;">，这个会在下面讲解一下</span></p>
<p>&nbsp;</p>
<h1 id="2-基本知识："><a href="#2-基本知识：" class="headerlink" title="2,基本知识："></a>2,<span style="font-family: 宋体;">基本知识：</span></h1><p>Tag<span style="font-family: 宋体;">：</span><a href="http://www.nfc-forum.org/specs/spec_list/" target="_blank" rel="external">http://www.nfc-forum.org/specs/spec_list/</a></p>
<p>NFC<span style="font-family: 宋体;">的基本标签类型有四种，以</span><span style="font-family: Arial;">1</span><span style="font-family: 宋体;">至</span><span style="font-family: Arial;">4</span><span style="font-family: 宋体;">来标识，各有不同的格式与容量。这些标签类型格式的基础是：</span><span style="font-family: Arial;">ISO 14443</span><span style="font-family: 宋体;">的</span><span style="font-family: Arial;">A</span><span style="font-family: 宋体;">与</span><span style="font-family: Arial;">B</span><span style="font-family: 宋体;">类型、</span><span style="font-family: Arial;">Sony FeliCa</span><span style="font-family: 宋体;">，前者是非接触式智能卡的国际标准，而后者符合</span><span style="font-family: Arial;">ISO 18092</span><span style="font-family: 宋体;">被动式通讯模式标准。　保持</span><span style="font-family: Arial;">NFC</span><span style="font-family: 宋体;">标签尽可能简单的优势是：在很多场合，标签可为一次性使用，例如在海报中寿命较短的场合。　</span></p>
<p>第<span style="font-family: Arial;">1</span><span style="font-family: 宋体;">类标签（</span><span style="font-family: Arial;">Tag 1 Type</span><span style="font-family: 宋体;">）：</span>此类型基于<span style="font-family: Arial;">ISO14443A</span><span style="font-family: 宋体;">标准。此类标签具有可读、重新写入的能力，用户可将其配置为只读。存储能力为</span><span style="font-family: Arial;">96</span><span style="font-family: 宋体;">字节，用来存网址</span><span style="font-family: Arial;">URL</span><span style="font-family: 宋体;">或其他小量数据富富有余。然而，内存可被扩充到</span><span style="font-family: Arial;">2k</span><span style="font-family: 宋体;">字节。此类</span><span style="font-family: Arial;">NFC</span><span style="font-family: 宋体;">标签的通信速度为</span><span style="font-family: Arial;">106 kbit/s</span><span style="font-family: 宋体;">。此类标签简洁，故成本效益较好，适用于许多</span><span style="font-family: Arial;">NFC</span><span style="font-family: 宋体;">应用</span>[5]</p>
<p>第<span style="font-family: Arial;">2</span><span style="font-family: 宋体;">类标签（</span><span style="font-family: Arial;">Tag 2 Type</span><span style="font-family: 宋体;">）：</span>此类标签也是基于<span style="font-family: Arial;">ISO14443A</span><span style="font-family: 宋体;">，具有可读、重新写入的能力，用户可将其配置为只读。其基本内存大小为</span><span style="font-family: Arial;">48</span><span style="font-family: 宋体;">字节，但可被扩充到</span><span style="font-family: Arial;">2k</span><span style="font-family: 宋体;">字节。通信速度也是</span><span style="font-family: Arial;">106 kbit/s</span><span style="font-family: 宋体;">。　　</span></p>
<p>第<span style="font-family: Arial;">3</span><span style="font-family: 宋体;">类标签（</span><span style="font-family: Arial;">Tag 3 Type</span><span style="font-family: 宋体;">）：</span>此类标签基于<span style="font-family: Arial;">Sony FeliCa</span><span style="font-family: 宋体;">体系。目前具有</span><span style="font-family: Arial;">2k</span><span style="font-family: 宋体;">字节内存容量，数据通讯速度为</span><span style="font-family: Arial;">212 kbit/s</span><span style="font-family: 宋体;">。故此类标签较为适合较复杂的应用，尽管成本较高。　</span></p>
<p>第<span style="font-family: Arial;">4</span><span style="font-family: 宋体;">类标签（</span><span style="font-family: Arial;">Tag 4 Type</span><span style="font-family: 宋体;">）：</span>此类标签被定义为与<span style="font-family: Arial;">ISO14443A</span><span style="font-family: 宋体;">、</span><span style="font-family: Arial;">B</span><span style="font-family: 宋体;">标准兼容。制造时被预先设定为可读</span><span style="font-family: Arial;">/</span><span style="font-family: 宋体;">可重写、或者只读。内存容量可达</span><span style="font-family: Arial;">32k</span><span style="font-family: 宋体;">字节，通信速度介于</span><span style="font-family: Arial;">106 kbit/s</span><span style="font-family: 宋体;">和</span><span style="font-family: Arial;">424 kbit/s</span><span style="font-family: 宋体;">之间。　　</span></p>
<p>从上述不同标签类型的定义可以看出，前两类与后两类在内存容量、构成方面大不相同。故它们的应用不太可能有很多重叠。第<span style="font-family: Arial;">1</span><span style="font-family: 宋体;">与第</span><span style="font-family: Arial;">2</span><span style="font-family: 宋体;">类标签是双态的，可为读</span><span style="font-family: Arial;">/</span><span style="font-family: 宋体;">写或只读。第</span><span style="font-family: Arial;">3</span><span style="font-family: 宋体;">与第</span><span style="font-family: Arial;">4</span><span style="font-family: 宋体;">类则是只读，数据在生产时写入或者通过特殊的标签写入器来写入。</span></p>
<p>NDEF<span style="font-family: 宋体;">：</span>NFC Data Exchange Format</p>
<p>为实现标签和<span style="font-family: Calibri;">NFC</span><span style="font-family: 宋体;">设备，及</span><span style="font-family: Calibri;">NFC</span><span style="font-family: 宋体;">设备之间的交互通信，</span><span style="font-family: Calibri;">NFC</span><span style="font-family: 宋体;">论坛</span><span style="font-family: Calibri;">(NFC FROUM)</span><span style="font-family: 宋体;">定义了称为</span><span style="font-family: Calibri;">NFC</span><span style="font-family: 宋体;">数据交换格式（</span><span style="font-family: Calibri;">NDEF</span><span style="font-family: 宋体;">）的通用数据格式。 </span></p>
<p>NDEF<span style="font-family: 宋体;">是轻量级的紧凑的二进制格式，可带有</span><span style="font-family: Calibri;">URL</span><span style="font-family: 宋体;">，</span><span style="font-family: Calibri;">vCard</span><span style="font-family: 宋体;">和</span><span style="font-family: Calibri;">NFC</span><span style="font-family: 宋体;">定义的各种数据类型。 </span></p>
<p>NDEF<span style="font-family: 宋体;">使得</span><span style="font-family: Calibri;">NFC</span><span style="font-family: 宋体;">的各种功能能容易的中使用各种支持的标签类型传输数据，因为</span><span style="font-family: Calibri;">NDEF</span><span style="font-family: 宋体;">封装了标签的种类细节信息，使得应用不用关心与何种标签在通信。 </span></p>
<p>NDEF<span style="font-family: 宋体;">交换的信息由一系列记录组成。每条记录包含一个有效载荷。内容可以似乎</span><span style="font-family: Calibri;">URL</span><span style="font-family: 宋体;">，</span><span style="font-family: Calibri;">MIME</span><span style="font-family: 宋体;">媒质，或</span><span style="font-family: Calibri;">NFC</span><span style="font-family: 宋体;">定义的数据类型。使用</span><span style="font-family: Calibri;">NFC</span><span style="font-family: 宋体;">定义的数据类型，载荷内容必须被定义在一个</span><span style="font-family: Calibri;">NFC</span><span style="font-family: 宋体;">记录类型定义（</span><span style="font-family: Calibri;">RTD</span><span style="font-family: 宋体;">）文件中。 </span></p>
<p>记录中数据的类型和大小由记录载荷的头部注明。</p>
<p>头部包含，类型域用来指定载荷的类型。载荷的长度数的单位是字节（<span style="font-family: Calibri;">octet</span><span style="font-family: 宋体;">）。可选的指定载荷是否带有一个</span><span style="font-family: Calibri;">NDEF</span><span style="font-family: 宋体;">记录。 </span></p>
<p>&nbsp;</p>
<h1 id="3-Android-NFC-API："><a href="#3-Android-NFC-API：" class="headerlink" title="3,Android NFC API："></a>3,Android NFC API<span style="font-family: 宋体;">：</span></h1><p>Android.nfc package包含顶层类用来与本地NFC适配器交互. 这些类可以表示被检测到的tags和用NDEF数据格式。</p>
<table><br><tbody><br><tr><br><td valign="top" width="195">Class</td><br><td valign="top" width="366">Description</td><br></tr><br><tr><br><td valign="top" width="195"><a href="http://developer.android.com/reference/android/nfc/NfcManager.html" target="_blank" rel="external">NfcManager</a></td><br><td valign="top" width="366">一个NFC adapter的管理器，可以列出所有此android设备支持的NFC adapter.只不过大部分android 设备只有一个NFC adapter，所以你大部分情况下可以直接用静态方法getDefaultAdapter(context)来取适配器。</td><br></tr><br><tr><br><td valign="top" width="195"><a href="http://developer.android.com/reference/android/nfc/NfcAdapter.html" target="_blank" rel="external">NfcAdapter</a></td><br><td valign="top" width="366">表示本设备的NFC adapter,可以定义Intent来请求将系统检测到tags的提醒发送到你的Activity.并提供方法去注册前台tag提醒发布和前台NDEF推送。 前台NDEF推送是当前android版本唯一支持的p2p NFC通信方式。</td><br></tr><br><tr><br><td valign="top" width="195"><a href="http://developer.android.com/reference/android/nfc/NdefMessage.html" target="_blank" rel="external">NdefMessage</a>and<a href="http://developer.android.com/reference/android/nfc/NdefRecord.html" target="_blank" rel="external">NdefRecord</a></td><br><td valign="top" width="366">NDEF是NFC论坛定义的数据结构，用来有效的存数据到NFC tags.比如文本，URL，和其他MIME类型。一个NdefMessage扮演一个容器，这个容器存哪些发送和读到的数据。一个NdefMessage对象包含0或多个NdefRecord,每个NDEF record有一个类型，比如文本，URL，智慧型海报/广告，或其他MIME数据。在NDEFMessage里的第一个NfcRecord的类型用来发送tag到一个android设备上的activity.</td><br></tr><br><tr><br><td valign="top" width="195"><a href="http://developer.android.com/reference/android/nfc/Tag.html" target="_blank" rel="external">Tag</a></td><br><td valign="top" width="366">标示一个被动的NFC目标，比如tag，card，钥匙挂扣，甚至是一个电话模拟的的NFC卡.当一个tag被检测到，一个tag对象将被创建并且封装到一个Intent里，然后NFC 发布系统将这个Intent用startActivity发送到注册了接受这种Intent的activity里。你可以用getTechList()方法来得到这个tag支持的技术细节和创建一个android.nfc.tech提供的相应的TagTechnology对象。</td><br></tr><br></tbody><br></table><br><a href="http://developer.android.com/reference/android/nfc/tech/package-summary.html" target="_blank" rel="external">android.nfc.tech</a> package 包含那些对tag查询属性和进行I/O操作的类。这些类分别标示一个tag支持的不同的NFC技术标准。<br><table><br><tbody><br><tr><br><td valign="top" width="139">Class</td><br><td valign="top" width="422">Description</td><br></tr><br><tr><br><td valign="top" width="139"><a href="http://developer.android.com/reference/android/nfc/tech/TagTechnology.html" target="_blank" rel="external">TagTechnology</a></td><br><td valign="top" width="422">这个接口是下面所有tag technology类必须实现的。</td><br></tr><br><tr><br><td valign="top" width="139"><a href="http://developer.android.com/reference/android/nfc/tech/NfcA.html" target="_blank" rel="external">NfcA</a></td><br><td valign="top" width="422">支持ISO 14443-3A 标准的操作。Provides access to NFC-A (ISO 14443-3A) properties and I/O operations.</td><br></tr><br><tr><br><td valign="top" width="139"><a href="http://developer.android.com/reference/android/nfc/tech/NfcB.html" target="_blank" rel="external">NfcB</a></td><br><td valign="top" width="422">Provides access to NFC-B (ISO 14443-3B) properties and I/O operations.</td><br></tr><br><tr><br><td valign="top" width="139"><a href="http://developer.android.com/reference/android/nfc/tech/NfcF.html" target="_blank" rel="external">NfcF</a></td><br><td valign="top" width="422">Provides access to NFC-F (JIS 6319-4) properties and I/O operations.</td><br></tr><br><tr><br><td valign="top" width="139"><a href="http://developer.android.com/reference/android/nfc/tech/NfcV.html" target="_blank" rel="external">NfcV</a></td><br><td valign="top" width="422">Provides access to NFC-V (ISO 15693) properties and I/O operations.</td><br></tr><br><tr><br><td valign="top" width="139"><a href="http://developer.android.com/reference/android/nfc/tech/IsoDep.html" target="_blank" rel="external">IsoDep</a></td><br><td valign="top" width="422">Provides access to ISO-DEP (ISO 14443-4) properties and I/O operations.</td><br></tr><br><tr><br><td valign="top" width="139"><a href="http://developer.android.com/reference/android/nfc/tech/Ndef.html" target="_blank" rel="external">Ndef</a></td><br><td valign="top" width="422">提供对那些被格式化为NDEF的tag的数据的访问和其他操作。Provides access to NDEF data and operations on NFC tags that have been formatted as NDEF.</td><br></tr><br><tr><br><td valign="top" width="139"><a href="http://developer.android.com/reference/android/nfc/tech/NdefFormatable.html" target="_blank" rel="external">NdefFormatable</a></td><br><td valign="top" width="422">对那些可以被格式化成NDEF格式的tag提供一个格式化的操作</td><br></tr><br><tr><br><td valign="top" width="139"><a href="http://developer.android.com/reference/android/nfc/tech/MifareClassic.html" target="_blank" rel="external">MifareClassic</a></td><br><td valign="top" width="422">如果android设备支持MIFARE，提供对MIFARE Classic目标的属性和I/O操作。</td><br></tr><br><tr><br><td valign="top" width="139"><a href="http://developer.android.com/reference/android/nfc/tech/MifareUltralight.html" target="_blank" rel="external">MifareUltralight</a></td><br><td valign="top" width="422">如果android设备支持MIFARE，提供对MIFARE Ultralight目标的属性和I/O操作。</td><br></tr><br></tbody><br></table>

<h1 id="4-Android-NFC"><a href="#4-Android-NFC" class="headerlink" title="4,Android NFC"></a>4,Android NFC</h1><p>系统操作流程</p>
<p><a href="http://www.yangjungou.com/wp-content/uploads/2012/12/nfc1.png"><img src="http://www.yangjungou.com/wp-content/uploads/2012/12/nfc1.png" alt="" title="nfc1"></a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>应用程序处理流程</p>
<p>&nbsp;</p>
<p><a href="http://www.yangjungou.com/wp-content/uploads/2012/12/2.png"><img src="http://www.yangjungou.com/wp-content/uploads/2012/12/2.png" alt="" title="图2"></a></p>
<p>&nbsp;</p>
<h1 id="5-Android-NFC应用开发步骤："><a href="#5-Android-NFC应用开发步骤：" class="headerlink" title="5,Android NFC应用开发步骤："></a>5,Android NFC<span style="font-family: 宋体;">应用开发步骤：</span></h1><h2 id="5-1-声明Android-Manifest-xml的元素"><a href="#5-1-声明Android-Manifest-xml的元素" class="headerlink" title="5.1 声明Android Manifest.xml的元素"></a>5.1 声明Android Manifest.xml的元素</h2><p>在你能访问一个设备的NFC硬件和正确的处理NFC的Intent之前，需要在AndroidManifest.xml中先声明下面的项：</p>
<p>1. NFC使用 &lt;uses-permission&gt; 元素来访问NFC硬件:</p>
<p>&lt;uses-permission android:name=”android.permission.NFC” /&gt;</p>
<p>2. 最小SDK版本需要设置正确，API level 9只包含有限的tag支持,包括：<br>.通过<a href="#ACTION_TAG_DISCOVERED">ACTION_TAG_DISCOVERED</a>来发布Tag信息<br>.只有通过<a href="#EXTRA_NDEF_MESSAGES">EXTRA_NDEF_MESSAGES</a>扩展来访问NDEF消息<br>.其他的tag属性和I/O操作都不支持<br>所以你可能想要用API level 10来实现对tag的广泛的读写支持。</p>
<p>&lt;uses-sdk android:minSdkVersion=”10”/&gt;</p>
<p>3. uses-feature 元素定义：你的程序可以再android市场里显示有NFC硬件。</p>
<p>&lt;uses-feature android:name=”android.hardware.nfc” android:required=”true” /&gt;</p>
<p>4. NFC intent filter告诉android系统你的activity能处理NFC数据，可以定义1个或多个intent filter:</p>
<p><em>&lt;intent-filter&gt;</em><br>_ &lt;action android:name=”android.nfc.action.NDEF<em>DISCOVERED”/&gt;</em><br><em> &lt;data android:mimeType=”mime/type” /&gt;</em><br><em> &lt;/intent-filter&gt;</em></p>
<p><em>&lt;intent-filter&gt;</em><br>_ &lt;action android:name=”android.nfc.action.TECH<em>DISCOVERED”/&gt;</em><br>_ &lt;meta-data android:name=”android.nfc.action.TECH<em>DISCOVERED”</em><br>_ android:resource=”@xml/nfc_tech<em>filter.xml” /&gt;</em><br><em> &lt;/intent-filter&gt;</em></p>
<p><em>&lt;intent-filter&gt;</em><br>_ &lt;action android:name=”android.nfc.action.TAG<em>DISCOVERED”/&gt;</em><br><em> &lt;/intent-filter&gt;</em></p>
<p>上边3个intent filters 有优先级，更多信息可以看下面的Tag发布系统</p>
<p>也可以看NFCDemo例子的 <a href="http://developer.android.com/resources/samples/NFCDemo/AndroidManifest.html" target="_blank" rel="external">AndroidManifest.xml</a>来有个更深的理解。</p>
<h2 id="5-2使用Intent发布系统"><a href="#5-2使用Intent发布系统" class="headerlink" title="5.2使用Intent发布系统"></a>5.2使用Intent发布系统</h2><p>Intent发布系统指定了3个intent有不同的优先级。通常当一个tag被检测到之后，Intent就被启动（start）了，这个启动遵循以下行为:</p>
<ul>
<li>android.nfc.action.NDEF_DISCOVERED: 这个intent是在一个包含NDEF负载的tag被检测到时启动，这是最高优先级的intent, android系统不会让你指定一个Intent能处理所有的NFC数据类型，你必须在AndroidManifest.xml中指定与NFC tag对应的&lt;data&gt;元素，这样当扫描到的tag传过来的数据类型与你定义的相匹配时，你的Activity就会被调用。例如想处理一个包含plain text 的 NDEF<em>DISCOVERED intent ，你要按照如下定义AndroidManifest.xml file:
</em>&lt;intent-filter&gt;<em>
</em> &lt;action android:name=”android.nfc.action.NDEF<em>DISCOVERED”/&gt;</em><br><em> &lt;data android:mimeType=”text/plain” /&gt;</em><br><em> &lt;/intent-filter&gt;</em></li>
</ul>
<p>如果NDEF_DISCOVERED intent 已经被启动，TECH_DISCOVERED 和 TAG_DISCOVERED intents 将不会被启动。假如一个未知的tag或者不包含NDEF负载的tag被检测到，此Intent就不会被启动。</p>
<ul>
<li>android.nfc.action.TECH_DISCOVERED: 如果 NDEF_DISCOVERED intent没启动或者没有一个Activity的filter检测NDEF_DISCOVERED ，并且此tag是已知的，那么此TECH_DISCOVERED Intent将会启动.TECH_DISCOVERED intent要求你在一个资源文件里(xml)里指定你要支持technologies列表。更多细节请看下面的<a href="#technology-resources">Specifying tag technologies to handle</a>.</li>
<li>android.nfc.action.TAG_DISCOVERED: 如果没有一个activity处理_DISCOVERED and TECH_DISCOVEREDintents或者tag被检测为未知的，那么此Intent将会被启动。<br>Specifying tag technologies to handle指定处理的technologies</li>
</ul>
<p>假如你的Activity在AndroidManifest.xml文件里声明了处理android.nfc.action.TECH_DISCOVERED intent ，你必须创建一个Xml格式的资源文件，并加上你的activity支持的technologies到tech-list集合里。这样你的activity将被认作能处理这些tech-list的处理者，如果tag使用的technology属于你的定义的list里，你的Activity将接收此Intent。你可以用getTechList()来获得tag支持的technologies。</p>
<p>例如：如果一个tag被检测到支持MifareClassic, NdefFormatable, 和 NfcA，你的tech-list集合必须指定了其中的一项或者多项来保证你的Activity能处理此Intent。</p>
<p>下面是一个资源文件例子，定义了所有的technologies. 你可以根据需要删掉不需要的项，将此文件以任意名字+.xml保存到&lt;project-root&gt;/res/xml文件夹.</p>
<p>&lt;resources xmlns:xliff=”urn:oasis:names:tc:xliff:document:1.2”&gt;<br>&lt;tech-list&gt;<br>&lt;tech&gt;android.nfc.tech.IsoDep&lt;/tech&gt;<br>&lt;tech&gt;android.nfc.tech.NfcA&lt;/tech&gt;<br>&lt;tech&gt;android.nfc.tech.NfcB&lt;/tech&gt;<br>&lt;tech&gt;android.nfc.tech.NfcF&lt;/tech&gt;<br>&lt;tech&gt;android.nfc.tech.NfcV&lt;/tech&gt;<br>&lt;tech&gt;android.nfc.tech.Ndef&lt;/tech&gt;<br>&lt;tech&gt;android.nfc.tech.NdefFormatable&lt;/tech&gt;<br>&lt;tech&gt;android.nfc.tech.MifareClassic&lt;/tech&gt;<br>&lt;tech&gt;android.nfc.tech.MifareUltralight&lt;/tech&gt;<br>&lt;/tech-list&gt;<br>&lt;/resources&gt;</p>
<p>你也可以指定多个tech-list集合，每个集合都认做独立的。如果任何单个tech-list集合是getTechList()返回的technologies集合的子集，那么你的Activity将被认为匹配了。这个还提供’与’和’或’操作。下面的例子表示支持NfcA和NDef的卡，或者支持NfcB和NDef的卡：</p>
<p><em>&lt;resources xmlns:xliff=”urn:oasis:names:tc:xliff:document:1.2”&gt;</em><br><em> &lt;tech-list&gt;</em><br><em> &lt;tech&gt;android.nfc.tech.NfcA&lt;/tech&gt;</em><br><em> &lt;tech&gt;android.nfc.tech.Ndef&lt;/tech&gt;</em><br><em> &lt;/tech-list&gt;</em><br><em> &lt;/resources&gt;</em></p>
<p><em>&lt;resources xmlns:xliff=”urn:oasis:names:tc:xliff:document:1.2”&gt;</em><br><em> &lt;tech-list&gt;</em><br><em> &lt;tech&gt;android.nfc.tech.NfcB&lt;/tech&gt;</em><br><em> &lt;tech&gt;android.nfc.tech.Ndef&lt;/tech&gt;</em><br><em> &lt;/tech-list&gt;</em><br><em> &lt;/resources&gt;</em></p>
<p>在 AndroidManifest.xml 文件中, 指定这个tech-list资源文件的方法是在&lt;activity&gt; 元素中创建&lt;meta-data&gt;元素，例如下面例子:</p>
<p><em>&lt;activity&gt;</em><br><em> …</em><br><em> &lt;intent-filter&gt;</em><br>_ &lt;action android:name=”android.nfc.action.TECH<em>DISCOVERED”/&gt;</em><br><em> &lt;/intent-filter&gt;</em></p>
<p>_&lt;meta-data android:name=”android.nfc.action.TECH<em>DISCOVERED”</em><br>_ android:resource=”@xml/nfc_tech<em>filter” /&gt;</em><br><em> …</em><br><em> &lt;/activity&gt;</em></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<h2 id="5-3使用前台发布系统Using-the-foreground-dispatch-system"><a href="#5-3使用前台发布系统Using-the-foreground-dispatch-system" class="headerlink" title="5.3使用前台发布系统Using the foreground dispatch system"></a>5.3使用前台发布系统Using the foreground dispatch system</h2><p>前台发布系统允许一个Activity 拦截一个tag Intent 获得最高优先级的处理，这种方式很容易使用和实现：</p>
<p>1. 添加下列代码到Activity的onCreate() 方法里</p>
<p>a. 创建一个 <a href="http://developer.android.com/reference/android/app/PendingIntent.html" target="_blank" rel="external">PendingIntent</a> 对象, 这样Android系统就能在一个tag被检测到时定位到这个对象</p>
<p>PendingIntent pendingIntent = PendingIntent.getActivity(<br>this, 0, new Intent(this,getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);</p>
<p>b. 在Intent filters里声明你想要处理的Intent，一个tag被检测到时先检查前台发布系统，如果前台Activity符合Intent filter的要求，那么前台的Activity的将处理此Intent。如果不符合，前台发布系统将Intent转到Intent发布系统。如果指定了null的Intent filters，当任意tag被检测到时，你将收到TAG_DISCOVERED intent。因此请注意你应该只处理你想要的Intent。</p>
<p>_IntentFilter ndef = new IntentFilter(NfcAdapter.ACTION_NDEF<em>DISCOVERED);</em><br><em> try {</em><br><em> ndef.addDataType(“<em>/</em>“); /* Handles all MIME based dispatches.</em><br><em> You should specify only the ones that you need. */</em><br><em> }</em><br><em> catch (MalformedMimeTypeException e) {</em><br><em> throw new RuntimeException(“fail”, e);</em><br><em> }</em><br><em> intentFiltersArray = new IntentFilter[] {</em><br><em> ndef,</em><br><em> };</em></p>
<p>c. 设置一个你程序要处理的Tag technologies的列表，调用Object.class.getName() 方法来获得你想要支持处理的technology类。<br>techListsArray = new String[][] { new String[] { NfcF.class.getName() } };<br>2. 覆盖下面的方法来打开或关闭前台发布系统。比如onPause()和onResume（）方法。必须在主线程里调用<a href="#enableForegroundDispatch(android.app.Activity, android.app.PendingIntent, android.content.IntentFilter[], java.lang.String[][]">enableForegroundDispatch(Activity, PendingIntent, IntentFilter[], String[][])</a>) 而且Activity在前台（可以在onResume()里调用来保证这点）。你也要覆盖onNewIntent回调来处理得到的NFC tag数据。</p>
<p><em>public void onPause() {</em><br><em> super.onPause();</em><br><em> mAdapter.disableForegroundDispatch(this);</em><br><em> }</em></p>
<p><em>public void onResume() {</em><br><em> super.onResume();</em><br><em> mAdapter.enableForegroundDispatch(this, pendingIntent, intentFiltersArray,techListsArray);</em><br><em> }</em></p>
<p><em>public void onNewIntent(Intent intent) {</em><br>_ Tag tagFromIntent = intent.getParcelableExtra(NfcAdapter.EXTRA<em>TAG);</em><br><em> //do something with tagFromIntent</em><br><em> }</em></p>
<p>See the <a href="http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/nfc/ForegroundDispatch.html" target="_blank" rel="external">ForegroundDispatch</a> sample from API Demos for the complete sample.</p>
<p>&nbsp;</p>
<h2 id="5-4-使用NFC-tag上的数据"><a href="#5-4-使用NFC-tag上的数据" class="headerlink" title="5.4 使用NFC tag上的数据"></a>5.4 使用NFC tag上的数据</h2><p>NFC tag上的数据是以字节存放，所以你可以将其转换成其他你想要的格式。当往tag写东西时，你必须以字节格式来写。Android提供API来帮助写符合NDEF标准的信息。使用此标准能保证你的数据在往tag写时能被所有Android NFC设备支持。然而，很多tag使用他们自己的标准来存储数据，这些标准也被Android支持。但你必须自己实现协议栈来读写这些tag。你可以在android.nfc.tech里找到所有支持的technologies，并且可以在TagTechnology接口里对technology有个了解。这一段是简单介绍在android系统里怎样使用NDEF 消息。这不意味着是一个完整的NDEF功能的介绍。但标出了主要需要注意和使用的东西。</p>
<p>为了方便使用NDEF消息，android提供<a href="http://developer.android.com/reference/android/nfc/NdefRecord.html" target="_blank" rel="external">NdefRecord</a> 和 <a href="http://developer.android.com/reference/android/nfc/NdefMessage.html" target="_blank" rel="external">NdefMessage</a>来包装原始字节数据为NDEF消息。一个NdefMessage是保存0个或多个NdefRecords的容器。每个NdefRecord有自己的唯一类型名字格式，记录类型和ID来与其他记录区分开。你可以存储不同类型的记录，不同的长度到同一个 NdefMessage。NFC tag容量的限制决定你的NdefMessage的大小。<br>那些支持Ndef和NdefFormatable技术的tag可以返回和接受NdefMessage对象为参数来进行读写操作。你需要创建你自己的逻辑来为其他在android.nfc.tech的tag技术实现读写字节的操作。</p>
<p>你可以从NFC Forum(<a href="http://www.nfc-forum.org/specs/" target="_blank" rel="external">http://www.nfc-forum.org/specs/</a>)下载NDEF消息标准的技术文档，比如纯文本和智慧型海报. NFCDemo例子里声明了纯文本和智慧型海报的NDef 消息。</p>
<h2 id="5-5读一个NFC-tag"><a href="#5-5读一个NFC-tag" class="headerlink" title="5.5读一个NFC tag"></a>5.5读一个NFC tag</h2><p>当一个NFC tag靠近一个NFC设备，一个相应的Intent将在设备上被创建。然后通知合适的程序来处理此Intent。<br>下面的方法处理TAG_DISCOVERED intent并且使用迭代器来获得包含在NDEF tag负载的数据</p>
<p><em>NdefMessage[] getNdefMessages(Intent intent) {</em><br><em> // Parse the intent</em><br><em> NdefMessage[] msgs = null;</em><br><em> String action = intent.getAction();</em><br>_ if (NfcAdapter.ACTION_TAG<em>DISCOVERED.equals(action)) {</em><br>_ Parcelable[] rawMsgs =intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF<em>MESSAGES);</em><br><em> if (rawMsgs != null) {</em><br><em> msgs = new NdefMessage[rawMsgs.length];</em><br><em> for (int i = 0; i &lt; rawMsgs.length; i++) {</em><br><em> msgs[i] = (NdefMessage) rawMsgs[i];</em><br><em> }</em><br><em> }</em><br><em> else {</em><br><em> // Unknown tag type</em><br><em> byte[] empty = new byte[] {};</em><br>_ NdefRecord record = new NdefRecord(NdefRecord.TNF<em>UNKNOWN, empty, empty,empty);</em><br><em> NdefMessage msg = new NdefMessage(new NdefRecord[] {record});</em><br><em> msgs = new NdefMessage[] {msg};</em><br><em> }</em><br><em> } </em><br><em> else {</em><br><em> Log.e(TAG, “Unknown intent “ + intent);</em><br><em> finish();</em><br><em> }</em><br><em> return msgs;</em><br><em>}</em></p>
<p>请记住NFC设备读到的数据是byte类型，所以你可能需要将他转成其他格式来呈现给用户。NFCDemo例子展示了怎样用com.example.android.nfc.record中的类来解析NDEF消息，比如纯文本和智慧型海报。</p>
<h2 id="5-6-写NFC-tag"><a href="#5-6-写NFC-tag" class="headerlink" title="5.6 写NFC tag"></a>5.6 写NFC tag</h2><p>往NFC tag写东西涉及到构造一个NDEF 消息和使用与tag匹配的Tag技术。下面的代码展示怎样写一个简单的文本到NdefFormatable tag：</p>
<p><em>NdefFormatable tag = NdefFormatable.get(t);</em><br><em>Locale locale = Locale.US;</em><br>_final byte[] langBytes = locale.getLanguage().getBytes(Charsets.US<em>ASCII);</em><br><em>String text = “Tag, you’re it!”;</em><br>_final byte[] textBytes = text.getBytes(Charsets.UTF<em>8);</em><br><em>final int utfBit = 0;</em><br><em>final char status = (char) (utfBit + langBytes.length);</em><br><em>final byte[] data = Bytes.concat(new byte[] {(byte) status}, langBytes, textBytes);</em><br>_NdefRecord record = NdefRecord(NdefRecord.TNF_WELL_KNOWN, NdefRecord.RTD<em>TEXT, newbyte[0], data);</em><br><em>try {</em><br><em> NdefRecord[] records = {text};</em><br><em> NdefMessage message = new NdefMessage(records);</em><br><em> tag.connect();</em><br><em> tag.format(message);</em><br><em>}</em><br><em>catch (Exception e){</em><br><em> //do error handling</em><br><em>}</em></p>
<h2 id="5-7-点对点的数据交换"><a href="#5-7-点对点的数据交换" class="headerlink" title="5.7 点对点的数据交换"></a>5.7 点对点的数据交换</h2><p>前台推送技术支持简单点对点的数据交换，你可以用<a href="#enableForegroundNdefPush(android.app.Activity, android.nfc.NdefMessage">enableForegroundNdefPush(Activity, NdefMessage)</a>) 方法来打开此功能. 为了用这个功能：</p>
<ul>
<li>推送数据的Activity必须是前台Activity。</li>
<li>你必须将你要发送的数据封装到NdefMessage对象里。</li>
<li>接收推送数据的设备必须支持com.android.npp NDEF推送协议，这个对于Android设备是可选的<br>假如你的Activity打开了前台推送功能并且位于前台，这时标准的Intent发布系统是禁止的。然而，如果你的Activity允许前台发布系统，那么此时检测tag的功能仍然是可用的，不过只适用于前台发布系统。</li>
</ul>
<p>要打开前台推送:</p>
<p>1. 创建一个你要推送给其他NFC设备的包含NdefRecords的NdefMessage。</p>
<p>2. 在你的Activity里实现<a href="#onResume(">onResume()</a>) 和 <a href="#onPause(">onPause()</a>) 的回调来正确处理前台推送的生命周期。你必须在你的Activity位于前台并在主线程里调用<a href="#enableForegroundNdefPush(android.app.Activity, android.nfc.NdefMessage">enableForegroundNdefPush(Activity, NdefMessage)</a>) （可以在onResume()里调用来保证这点）.</p>
<p><em>public void onResume() {</em><br><em> super.onResume();</em><br><em> if (mAdapter != null)</em><br><em> mAdapter.enableForegroundNdefPush(this, myNdefMessage);</em><br><em>}</em><br><em>public void onPause() {</em><br><em> super.onPause();</em><br><em> if (mAdapter != null)</em><br><em> mAdapter.disableForegroundNdefPush(this);</em><br><em>}</em></p>
<p>当Activity位于前台，你可以靠近另外一个NFC设备来推送数据。请参考例子<a href="http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/nfc/ForegroundNdefPush.html" target="_blank" rel="external">ForegroundNdefPush</a>来了解点对点数据交换。</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>以上内容参考网上的好Android的标准API文档，部分内容需自我实践才可以使用；</p>
<h1 id="6-总结："><a href="#6-总结：" class="headerlink" title="6,总结："></a>6,<span style="font-family: 宋体;">总结：</span></h1><p>首先在AndroidManifest.xml文件中注册<span style="font-family: Calibri;">NFC</span><span style="font-family: 宋体;">的读写权限和注册</span><span style="font-family: Calibri;">Activity</span><span style="font-family: 宋体;">操作何种卡片数据类型的</span><span style="font-family: Calibri;">intent</span></p>
<p>其次在<span style="font-family: Calibri;">Activity</span><span style="font-family: 宋体;">中设置自己的前台发布系统，防止系统吊起其他应用程序处理</span><span style="font-family: Calibri;">NFC</span><span style="font-family: 宋体;">的</span><span style="font-family: Calibri;">Tag</span><span style="font-family: 宋体;">信息</span></p>
<p>再次在<span style="font-family: Calibri;">onresume</span><span style="font-family: 宋体;">或者自己的</span>onNewIntent函数中处理自己的<span style="font-family: Calibri;">Intent</span><span style="font-family: 宋体;">的信息，来读卡的</span><span style="font-family: Calibri;">UID</span><span style="font-family: 宋体;">，以及读写卡片；</span></p>
<p>注意写卡的操作时和自己的卡片类型相关的，<span style="font-family: Calibri;">Android</span><span style="font-family: 宋体;">支持的卡片在写卡前最好执行一下</span><a href="http://developer.android.com/reference/android/nfc/tech/NdefFormatable.html" target="_blank" rel="external">NdefFormatable</a></p>
<p>要了解自己卡片的类型，一般<span style="font-family: Calibri;">TapeA</span><span style="font-family: 宋体;">卡用</span><a href="http://developer.android.com/reference/android/nfc/tech/NdefFormatable.html" target="_blank" rel="external">NdefFormatable</a>后直接用<a href="http://developer.android.com/reference/android/nfc/tech/NdefFormatable.html" target="_blank" rel="external">Ndef</a>写卡问题不大；</p>
<p>&nbsp;</p>
<p>我一直好奇上海的公交卡在刷卡的过程中到底实时联网吗？最后看了中卡的介绍认定并不是联网的，我们的钱是写在卡里的。最后还有<span style="font-family: Calibri;">4</span><span style="font-family: 宋体;">篇文章就</span><span style="font-family: Calibri;">2013</span><span style="font-family: 宋体;">了！</span></p>
<p>&nbsp;</p>
<p>&nbsp;</p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/android-nfc/" rel="tag"># android nfc</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2012/12/26/e3-80-90-e5-8f-883-e3-80-91-e7-a7-91-e5-ad-a6-e4-b8-8a-e7-bd-91-e7-a8-b3-e5-ae-9a-e7-9a-84-e4-bd-bf-e7-94-a8google/" rel="next" title="【又3】科学上网,稳定的使用Google">
                <i class="fa fa-chevron-left"></i> 【又3】科学上网,稳定的使用Google
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2013/01/01/e3-80-90-e5-8f-885-e3-80-91ubuntu-e4-b8-8a-e6-90-ad-e5-bb-basvn-e7-ae-a1-e7-90-86-e4-bb-a3-e7-a0-81/" rel="prev" title="【又5】Ubuntu上搭建SVN管理代码">
                【又5】Ubuntu上搭建SVN管理代码 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="https://avatars2.githubusercontent.com/u/2267650?v=3&s=460"
               alt="Jeson.yang" />
          <p class="site-author-name" itemprop="name">Jeson.yang</p>
           
              <p class="site-description motion-element" itemprop="description">一个来自光州的元</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">170</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">54</span>
                <span class="site-state-item-name">分类</span>
              
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              
                <span class="site-state-item-count">29</span>
                <span class="site-state-item-name">标签</span>
              
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/bingxuebage" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="http://weibo.com/binxuebage" target="_blank" title="Weibo">
                  
                    <i class="fa fa-fw fa-weibo"></i>
                  
                  Weibo
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-简介"><span class="nav-number">1.</span> <span class="nav-text">1,简介</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-基本知识："><span class="nav-number">2.</span> <span class="nav-text">2,基本知识：</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-Android-NFC-API："><span class="nav-number">3.</span> <span class="nav-text">3,Android NFC API：</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-Android-NFC"><span class="nav-number">4.</span> <span class="nav-text">4,Android NFC</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-Android-NFC应用开发步骤："><span class="nav-number">5.</span> <span class="nav-text">5,Android NFC应用开发步骤：</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#5-1-声明Android-Manifest-xml的元素"><span class="nav-number">5.1.</span> <span class="nav-text">5.1 声明Android Manifest.xml的元素</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-2使用Intent发布系统"><span class="nav-number">5.2.</span> <span class="nav-text">5.2使用Intent发布系统</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-3使用前台发布系统Using-the-foreground-dispatch-system"><span class="nav-number">5.3.</span> <span class="nav-text">5.3使用前台发布系统Using the foreground dispatch system</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-4-使用NFC-tag上的数据"><span class="nav-number">5.4.</span> <span class="nav-text">5.4 使用NFC tag上的数据</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-5读一个NFC-tag"><span class="nav-number">5.5.</span> <span class="nav-text">5.5读一个NFC tag</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-6-写NFC-tag"><span class="nav-number">5.6.</span> <span class="nav-text">5.6 写NFC tag</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-7-点对点的数据交换"><span class="nav-number">5.7.</span> <span class="nav-text">5.7 点对点的数据交换</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#6-总结："><span class="nav-number">6.</span> <span class="nav-text">6,总结：</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Jeson.yang</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

  

</body>
</html>
